# ContactBookApp

# Система Управления Клиентами и Контактами

## Описание

Данный проект представляет собой систему для управления информацией о клиентах и их контактных данных (телефонные номера и адреса электронной почты). Реализована база данных с двумя основными сущностями: **Client** (клиенты) и **Contact** (контакты клиентов). Система разработана с использованием **Spring Framework** и предоставляет REST API для взаимодействия с данными.

## Функциональность

Система позволяет выполнять следующие операции через API:

1. **Добавление нового клиента**  
   Ожидает получение данных клиента (имя и контакты). Клиент может иметь несколько контактов (телефоны и email).

2. **Добавление нового контакта клиенту**  
   Позволяет добавлять новые контакты (телефон или email) для уже существующего клиента.

3. **Получение списка всех клиентов**  
   Возвращает список всех клиентов с их контактной информацией.

4. **Получение информации по заданному клиенту (по ID)**  
   Возвращает подробную информацию о клиенте по его ID, включая все его контакты.

5. **Получение списка контактов клиента**  
   Возвращает все контакты (телефоны и email) конкретного клиента по его ID.

6. **Получение списка контактов заданного типа для клиента**  
   Позволяет получить только те контакты клиента, которые относятся к заданному типу (например, только телефоны или только email).

## Структура Базы Данных

### 1. **Client** (Клиенты)

- **id** (Primary Key)
- **name** (String) — имя клиента

### 2. **Contact** (Контакты)

- **id** (Primary Key)
- **client_id** (Foreign Key) — ссылка на клиента
- **type** (Enum: `PHONE`, `EMAIL`) — тип контакта
- **value** (String) — значение контакта (номер телефона или email)

## Логика работы

1. **Добавление клиента**: Клиент создается через API, и для него можно добавить несколько контактов сразу. Контакты могут быть разных типов (телефон или email).

2. **Добавление контакта**: Контакт добавляется к уже существующему клиенту. Для этого требуется ID клиента и тип контакта (телефон или email).

3. **Получение всех клиентов**: Запрос возвращает список всех клиентов, включая их контакты. Результат представляется в виде списка DTO объектов с полями `name` и списком контактов.

4. **Получение клиента по ID**: Запрос возвращает подробную информацию о клиенте по его уникальному ID, включая все его контакты.

5. **Получение контактов клиента**: Можно получить все контакты для конкретного клиента по его ID.

6. **Получение контактов заданного типа**: Позволяет фильтровать контакты по типу (например, получить только телефоны или только email-адреса для клиента).

## Запросы для проверки

### 1. **Добавление нового клиента**

- **Метод**: `POST`
- **URL**: `http://localhost:9090/clients`
- **Тело запроса (JSON)**:
    ```json
    {
        "name": "John Doe"
    }
    ```

### 2. **Добавление контакта к клиенту (с телефоном)**

- **Метод**: `POST`
- **URL**: `http://localhost:9090/clients/{clientId}/contacts`
- **Тело запроса (JSON)**:
    ```json
    {
        "contactType": "PHONE",
        "contactValue": "+1234567890"
    }
    ```

### 3. **Добавление контакта к клиенту (с email)**

- **Метод**: `POST`
- **URL**: `http://localhost:9090/clients/{clientId}/contacts`
- **Тело запроса (JSON)**:
    ```json
    {
        "contactType": "EMAIL",
        "contactValue": "john.doe@example.com"
    }
    ```

### 4. **Получение всех клиентов**

- **Метод**: `GET`
- **URL**: `http://localhost:9090/clients`

### 5. **Получение клиента по ID**

- **Метод**: `GET`
- **URL**: `http://localhost:9090/clients/{id}`

### 6. **Получение всех контактов клиента по ID**

- **Метод**: `GET`
- **URL**: `http://localhost:9090/clients/{id}/contacts`

### 7. **Получение контактов клиента по типу (например, по типу PHONE)**

- **Метод**: `GET`
- **URL**: `http://localhost:9090/clients/{clientId}/contacts/{type}`

  Пример:
  `http://localhost:9090/clients/1/contacts/PHONE`

### 8. **Получение контактов клиента по типу (например, по типу EMAIL)**

- **Метод**: `GET`
- **URL**: `http://localhost:9090/clients/{clientId}/contacts/{type}`

  Пример:
  `http://localhost:9090/clients/1/contacts/EMAIL`

---